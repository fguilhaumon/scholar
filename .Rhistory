id <- jJwtZT0AAAAJ ; article <- e5wmG9Sq2KIC
id <- "jJwtZT0AAAAJ" ; article <- "e5wmG9Sq2KIC"
library(devtools)
?devtools
?`devtools-deprecated`
?load_imports
load_imports(pkg = ".")
library(devtools)
load_imports(pkg = ".")
load_imports
?load_imports
dev_package_deps(pkg = ".")
a=dev_package_deps(pkg = ".")
a
?dev_package_deps
devtools::install_github("hadley/devtools")
load_all()
id <- "jJwtZT0AAAAJ" ; article <- "e5wmG9Sq2KIC"
id <- tidy_id(id)
id
url_base <- paste0("http://scholar.google.com/citations?",
"view_op=view_citation&hl=en&citation_for_view=")
url_tail <- paste(id, article, sep=":")
url <- paste0(url_base, url_tail)
url
doc <- GET(url, handle=getOption("scholar_handle")) %>% read_html()
library(magrittr)
doc <- GET(url, handle=getOption("scholar_handle")) %>% read_html()
library(R.cache)
library(rvest)
doc <- GET(url, handle=getOption("scholar_handle")) %>% read_html()
library(R.cache);library(dplyr);library(httr);library(rvest);library(stringr);library(xml2)
doc <- GET(url, handle=getOption("scholar_handle")) %>% read_html()
doc
years <- doc %>%
html_nodes(xpath="//*/div[@id='gsc_graph_bars']/a") %>%
html_attr("href") %>%
str_replace(".*as_yhi=(.*)$", "\\1") %>%
as.numeric()
years
id <- "jJwtZT0AAAAJ" ; article <- "u-x6o8ySG0sC"
id <- tidy_id(id)
url_base <- paste0("http://scholar.google.com/citations?",
"view_op=view_citation&hl=en&citation_for_view=")
url_tail <- paste(id, article, sep=":")
url <- paste0(url_base, url_tail)
doc <- GET(url, handle=getOption("scholar_handle")) %>% read_html()
doc
years <- doc %>%
html_nodes(xpath="//*/div[@id='gsc_graph_bars']/a") %>%
html_attr("href") %>%
str_replace(".*as_yhi=(.*)$", "\\1") %>%
as.numeric()
years
doc %>%
html_nodes(xpath="//*/div[@id='gsc_graph_bars']/a")
doc
doc[2]
doc
summary(doc)
get_article_cite_history(id,article)
html_nodes(doc,xpath="//*/div[@id='gsc_graph_bars']/a")
doc %>%
html_nodes(xpath="//*/div[@id='gsc_graph_bars']/a") %>%
html_attr("href")
?html_nodes
html_nodes(doc,xpath="//*[(@id = "gsc_graph_bars")]")
html_nodes(doc,xpath="//*[(@id = 'gsc_graph_bars')]")
html_nodes(doc,xpath='//*[(@id = "gsc_graph_bars")]')
doc
link <- html_attr(html_nodes(doc,css=".gsc_title_link"),"href")
link
paper.Details.html <- read_html(paste0("https://scholar.google.com/citations?view_op=view_citation&hl=en&user=jJwtZT0AAAAJ&sortby=pubdate&citation_for_view=jJwtZT0AAAAJ:",article))
doc2 <- GET(url, handle=getOption("scholar_handle")) %>% read_html()
html_nodes(doc,css=".gsc_title_link")
doc
?GET
handle_pool
handle_pool()
GET(url, handle=getOption("scholar_handle"))
html_nodes(doc,css=".gsc_title_link")
doc
url_base <- paste0("http://scholar.google.com/citations?",
"view_op=view_citation&hl=en&user=",id,"&sortby=pubdate&citation_for_view=")
url_tail <- paste(id, article, sep=":")
url <- paste0(url_base, url_tail)
doc <- GET(url, handle=getOption("scholar_handle")) %>% read_html()
#getting the pdf link
link <- html_attr(html_nodes(doc,css=".gsc_title_link"),"href")
link
?read_html
doc
url_base <- paste0("https://scholar.google.com/citations?",
"view_op=view_citation&hl=en&user=",id,"&sortby=pubdate&citation_for_view=")
url_tail <- paste(id, article, sep=":")
url <- paste0(url_base, url_tail)
doc <- GET(url, handle=getOption("scholar_handle")) %>% read_html()
doc
link <- html_attr(html_nodes(doc,css=".gsc_title_link"),"href")
link
article <- "e5wmG9Sq2KIC"
url_base <- paste0("https://scholar.google.com/citations?",
"view_op=view_citation&hl=en&user=",id,"&sortby=pubdate&citation_for_view=")
url_tail <- paste(id, article, sep=":")
url <- paste0(url_base, url_tail)
doc <- GET(url, handle=getOption("scholar_handle")) %>% read_html()
#getting the pdf link
link <- html_attr(html_nodes(doc,css=".gsc_title_link"),"href")
link
id
url
doc2 <- read_html(GET(paste0("https://scholar.google.com/citations?view_op=view_citation&hl=en&user=jJwtZT0AAAAJ&sortby=pubdate&citation_for_view=jJwtZT0AAAAJ:",article),handle=getOption("scholar_handle")))
doc2
article
rm(list=ls())
id <- "jJwtZT0AAAAJ" ; article <- "e5wmG9Sq2KIC"
id <- tidy_id(id)
url_base <- paste0("https://scholar.google.com/citations?",
"view_op=view_citation&hl=en&user=",id,"&sortby=pubdate&citation_for_view=")
url_tail <- paste(id, article, sep=":")
url <- paste0(url_base, url_tail)
librar(scholar)
library(scholar)
id <- tidy_id(id)
url_base <- paste0("https://scholar.google.com/citations?",
"view_op=view_citation&hl=en&user=",id,"&sortby=pubdate&citation_for_view=")
url_tail <- paste(id, article, sep=":")
url <- paste0(url_base, url_tail)
url
doc <- GET(url, handle=getOption("scholar_handle")) %>% read_html()
library(R.cache);library(dplyr);library(httr);library(rvest);library(stringr);library(xml2)
doc <- GET(url, handle=getOption("scholar_handle")) %>% read_html()
doc
print(doc)
cat(doc)
doc[[2]]
doc[[1]]
as.character(doc)
grep("pdf",as.character(doc))
grep("PDF",as.character(doc))
papers <- get_publications(id)
papers
library(scholar)
papers <- get_publications(id)
papers
getOption("scholar_handle")
url_base <- paste0("https://scholar.google.com/citations?",
"view_op=view_citation&hl=en&citation_for_view=")
url_tail <- paste(id, article, sep=":")
url <- paste0(url_base, url_tail)
doc <- GET(url, handle=getOption("scholar_handle")) %>% read_html()
doc
library(scholar)
url_base <- paste0("https://scholar.google.com/citations?",
"view_op=view_citation&hl=en&citation_for_view=")
url_tail <- paste(id, article, sep=":")
url <- paste0(url_base, url_tail)
doc <- GET(url, handle=getOption("scholar_handle")) %>% read_html()
url
doc
as.character(doc)
firefox
firefox()
system("firefox")
url_base <- paste0("https://scholar.google.com/citations?",
"view_op=view_citation&hl=en&citation_for_view=")
url_tail <- paste(id, article, sep=":")
url <- paste0(url_base, url_tail)
doc <- GET(url, handle=getOption("scholar_handle")) %>% read_html()
doc
id <- "jJwtZT0AAAAJ" ; article <- "e5wmG9Sq2KIC" #"u-x6o8ySG0sC"
library(R.cache);library(dplyr);library(httr);library(rvest);library(stringr);library(xml2)
getOption("scholar_handle")
doc <- GET(url, handle=getOption("scholar_handle")) %>% read_html()
id <- tidy_id(id)
url_base <- paste0("https://scholar.google.com/citations?",
"view_op=view_citation&hl=en&user=",id,"&sortby=pubdate&citation_for_view=")
url_tail <- paste(id, article, sep=":")
url <- paste0(url_base, url_tail)
doc <- GET(url, handle=getOption("scholar_handle")) %>% read_html()
doc
as.character(doc)
library(scholar)
getOption("scholar_handle")
?GET
doc <- GET(url, handle=getOption("scholar_handle"), set_cookies()) %>% read_html()
doc
as.character(doc)
id <- "jJwtZT0AAAAJ" ; article <- "e5wmG9Sq2KIC"
library(R.cache);library(dplyr);library(httr);library(rvest);library(stringr);library(xml2)
id <- tidy_id(id)
url_base <- paste0("https://scholar.google.com/citations?",
"view_op=view_citation&hl=en&user=",id,"&sortby=pubdate&citation_for_view=")
url_tail <- paste(id, article, sep=":")
url <- paste0(url_base, url_tail)
doc <- GET(url, handle=getOption("scholar_handle"), set_cookies()) %>% read_html()
as.character(doc)
id <- "jJwtZT0AAAAJ" ; article <- "e5wmG9Sq2KIC"
library(R.cache);library(dplyr);library(httr);library(rvest);library(stringr);library(xml2)
id <- tidy_id(id)
url_base <- paste0("https://scholar.google.com/citations?",
"view_op=view_citation&hl=en&user=",id,"&sortby=pubdate&citation_for_view=")
url_tail <- paste(id, article, sep=":")
url <- paste0(url_base, url_tail)
doc <- GET(url, handle=getOption("scholar_handle"), set_cookies()) %>% read_html()
doc
link <- html_attr(html_nodes(doc,css=".gsc_title_link"),"href")
link
nodePDF <- as.character(html_nodes(paper.Details.html,css=".gsc_title_ggi"))
nodePDF <- as.character(html_nodes(doc,css=".gsc_title_ggi"))
nodePDF
if(length(nodePDF)!=0) {
link.pdf <- strsplit(nodePDF,"\"")[[1]][grep("http",strsplit(nodePDF,"\"")[[1]])]
}else{
link.pdf <- NA
}
authors <- html_nodes(doc,css=".gs_scl")[[grep("Authors",html_nodes(paper.Details.html,css=".gs_scl"))]] #as.character(papers[p,"author"])
authors <- html_nodes(doc,css=".gs_scl")[[grep("Authors",html_nodes(doc,css=".gs_scl"))]] #as.character(papers[p,"author"])
authors
authors <- strsplit(html_text(html_nodes(authors,".gsc_value")),",")[[1]]
authors
authors <- sapply(authors,function(x)gsub("^\\s+|\\s+$", "", x))
authors
title <- as.character(papers[p,"title"])
title()
title
html_nodes(doc,css=".gs_scl")
html_nodes(doc,css=".gs_
html_nodes(doc,css=".gsc_title_link")
html_text(html_nodes(doc,css=".gsc_title_link"))
title <- html_text(html_nodes(doc,css=".gsc_title_link"))
title
authors.me <- grep(myName,authors,ignore.case = TRUE)
all.infos <- html_nodes(doc,css=".gs_scl")
authors <- all.infos[[grep("Authors",all.infos)]]
authors <- strsplit(html_text(html_nodes(authors,".gsc_value")),",")[[1]]
authors <- sapply(authors,function(x)gsub("^\\s+|\\s+$", "", x))#trea leading and tailing spaces
authors
all.infos
i=all.infos[1]
i
html_nodes(i,"gsc_field"))
html_nodes(i,"gsc_field")
html_nodes(i,css="gsc_field")
?html_nodes
html_nodes(doc,css=".gs_scl")
html_nodes(i,css=".gsc_field")
html_text(html_nodes(i,css=".gsc_field"))
field <- html_text(html_nodes(i,css=".gsc_field"))
sapply(strsplit(html_text(html_nodes(i,".gsc_value")),",")[[1]],function(x)gsub("^\\s+|\\s+$", "", x)))
sapply(strsplit(html_text(html_nodes(i,".gsc_value")),",")[[1]],function(x)gsub("^\\s+|\\s+$", "", x))
all.infos
i=all.infos[2]
i
html_text(i)
?html_text
strsplit(html_text(i),"date")
i=all.infos[3]
i
html_text(i)
html_text(html_nodes(i,css=".gsc_value"))
i=all.infos[2]
html_text(html_nodes(i,css=".gsc_value"))
i=all.infos[4]
html_text(html_nodes(i,css=".gsc_value"))
i
?switch
i
html_text(html_nodes(i,css=".gsc_value"))
i=all.infos[3]
i
i=all.infos[4]
i
i=all.infos[5]
html_text(html_nodes(i,css=".gsc_value"))
html_text(html_nodes(all.infos[6],css=".gsc_value"))
html_text(html_nodes(all.infos[7],css=".gsc_value"))
all.infos
html_text(html_nodes(all.infos[7],css=".gsc_value"))
html_text(html_nodes(all.infos[8],css=".gsc_value"))
field <- html_text(html_nodes(i,css=".gsc_field"))
info <- switch(field,
Authors=sapply(strsplit(html_text(html_nodes(i,".gsc_value")),",")[[1]],function(x)gsub("^\\s+|\\s+$", "", x),
html_text(html_nodes(i,css=".gsc_value"))
)
)
field <- html_text(html_nodes(i,css=".gsc_field"))
info <- switch(field,
Authors=sapply(strsplit(html_text(html_nodes(i,".gsc_value")),",")[[1]],function(x)gsub("^\\s+|\\s+$", "", x)),
html_text(html_nodes(i,css=".gsc_value"))
)
info
field
all.infos.clean <- lapply(all.infos,function(i){
field <- html_text(html_nodes(i,css=".gsc_field"))
info <- switch(field,
Authors=sapply(strsplit(html_text(html_nodes(i,".gsc_value")),",")[[1]],function(x)gsub("^\\s+|\\s+$", "", x)),
html_text(html_nodes(i,css=".gsc_value"))
)
})
all.infos.clean
all.infos.clean <- lapply(all.infos,function(i){
field <- html_text(html_nodes(i,css=".gsc_field"))
info <- switch(field,
Authors=sapply(strsplit(html_text(html_nodes(i,".gsc_value")),",")[[1]],function(x)gsub("^\\s+|\\s+$", "", x)),
html_text(html_nodes(i,css=".gsc_value"))
)
names(info) <- field
info
})
all.infos.clean
all.infos.clean <- lapply(all.infos,function(i){
field <- html_text(html_nodes(i,css=".gsc_field"))
info <- switch(field,
Authors=sapply(strsplit(html_text(html_nodes(i,".gsc_value")),",")[[1]],function(x)gsub("^\\s+|\\s+$", "", x)),
html_text(html_nodes(i,css=".gsc_value"))
)
c(field,info)
})
all.infos.clean
fields <- sapply(all.infos,function(i)html_text(html_nodes(i,css=".gsc_field")))
fileds
fields
all.infos.clean <- lapply(seq_along(all.infos),function(i){
it <- all.infos[it]
info <- switch(field,
Authors=sapply(strsplit(html_text(html_nodes(it,".gsc_value")),",")[[1]],function(x)gsub("^\\s+|\\s+$", "", x)),
html_text(html_nodes(it,css=".gsc_value"))
)
info
})
seq_along(all.infos)
all.infos.clean <- lapply(seq_along(all.infos),function(i){
it <- all.infos[i]
info <- switch(field,
Authors=sapply(strsplit(html_text(html_nodes(it,".gsc_value")),",")[[1]],function(x)gsub("^\\s+|\\s+$", "", x)),
html_text(html_nodes(it,css=".gsc_value"))
)
info
})
all.infos.clean
names(all.infos.clean) <- fields
res <- list(title=html_text(html_nodes(doc,css=".gsc_title_link")),all.infos.clean)
res
res <- list()
res$title <- html_text(html_nodes(doc,css=".gsc_title_link"))
res <- c(res,all.infos.clean)
res
res$link <- link
res$link.pdf <- link.pdf
res
library(scholar)
doc
html_nodes(doc)
class(doc)
hml_character(doc)
hml_text(doc)
librar(httr
)
html_text(doc)
length(doc)
sapply(doc,html_text)
html_text(html_nodes(doc,1)
)
html_text(html_nodes(doc,"body"))
objName <- paste0("article_page_auth-",id,"_art-",article)
objName
assign(objName,doc)
ls()
article_page_auth-jJwtZT0AAAAJ_art-e5wmG9Sq2KIC
'article_page_auth-jJwtZT0AAAAJ_art-e5wmG9Sq2KIC'
objName <- paste0("article_page_auth",id,"_art",article)
assign(objName,doc)
objName
article_page_authjJwtZT0AAAAJ_arte5wmG9Sq2KIC
?save
objName <- paste0("article_page_auth",id,"_art",article)
assign(objName,doc)
save(list=objName,file=paste0(objName,".RData"))
getwd()
sessionInfo()
?sessionInfo
system.file("scholar")
library(scholar)
system.file("scholar")
?system.file
system.file("exports","scholar")
?package.contents
?`packageInfo-class`
library(scholar)
getwd()
setwd("/home/franz/Bureau/")
r=get_article_details(id <- "jJwtZT0AAAAJ",article <- "e5wmG9Sq2KIC")
library(scholar)
r=get_article_details(id <- "jJwtZT0AAAAJ",article <- "e5wmG9Sq2KIC")
r
paste0(BULL,"aa")
paste0(NULL,"aa")
library(scholar)
r=get_article_details(id="jJwtZT0AAAAJ",article="e5wmG9Sq2KIC",lib="exports")
r
library(scholar)
r=get_article_details(id="jJwtZT0AAAAJ",article="e5wmG9Sq2KIC",lib="exports")
dir.exists()
library(scholar)
r=get_article_details(id="jJwtZT0AAAAJ",article="e5wmG9Sq2KIC",lib="exports")
r
s=get_article_details(id="jJwtZT0AAAAJ",article="mB3voiENLucC",lib="exports")
s
data.frame(r,s)
dim(data.frame(r,s))
do.call(rbind,r,s)
do.call(rbind,list(r,s))
dim(do.call(rbind,list(r,s)))
s
getOption("scholar_handler")
getOption()
